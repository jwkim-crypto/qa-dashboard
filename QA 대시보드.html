<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QA ì²´í¬ë¦¬ìŠ¤íŠ¸ ëŒ€ì‹œë³´ë“œ</title>
    <style>
        body { font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', Arial, sans-serif; padding: 20px; background-color: #f4f6f8; }
        h2 { color: #333; border-left: 5px solid #4a90e2; padding-left: 10px; }
        .controls { margin: 12px 0 20px; display: flex; gap: 10px; align-items: center; flex-wrap: wrap; }
        select, input[type="text"] { padding: 8px 10px; border: 1px solid #ced4da; border-radius: 6px; background: #fff; }
        button { padding: 8px 12px; border: 1px solid #adb5bd; background: #fff; border-radius: 6px; cursor: pointer; }
        button:hover { background: #f1f3f5; }
        table { width: 100%; border-collapse: collapse; background: white; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
        th, td { border: 1px solid #ddd; padding: 12px; text-align: left; vertical-align: middle; }
        th { background-color: #f8f9fa; font-weight: bold; color: #555; }
        tr:hover { background-color: #f1f3f5; }
        .desc { font-size: 0.9em; color: #666; }
        .category { font-weight: 600; color: #0b7285; }
        .muted { color: #868e96; font-size: 0.85em; }
        .right { text-align: right; }

        /* ìƒíƒœ ë±ƒì§€ */
        .badge { cursor: pointer; padding: 6px 12px; border-radius: 20px; font-size: 0.85em; font-weight: bold; display: inline-block; text-align: center; min-width: 92px; transition: all 0.2s; user-select: none; }
        .dev-todo { background-color: #e9ecef; color: #495057; }
        .dev-done { background-color: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .tc-pending { background-color: #fff3cd; color: #856404; }
        .tc-pass { background-color: #cce5ff; color: #004085; }
        .tc-fail { background-color: #f8d7da; color: #721c24; }

        .footer { margin-top: 14px; color: #868e96; font-size: 0.85em; }
        .count { font-weight: 600; color: #495057; }
        .pill { display: inline-block; padding: 2px 8px; border-radius: 999px; background: #f1f3f5; margin-left: 6px; font-size: 0.8em; color: #495057; }
    </style>
</head>
<body>

    <h2>âœ… QA ì²´í¬ë¦¬ìŠ¤íŠ¸ ëŒ€ì‹œë³´ë“œ</h2>
    <div class="controls">
        <label>
            ì¹´í…Œê³ ë¦¬
            <select id="categoryFilter">
                <option value="ALL">ì „ì²´</option>
            </select>
        </label>
        <label>
            ê²€ìƒ‰
            <input id="searchInput" type="text" placeholder="ê¸°ëŠ¥ëª…/ì‹œë‚˜ë¦¬ì˜¤ ê²€ìƒ‰">
        </label>
        <label>
            ì‘ì„±ì
            <input id="updatedByInput" type="text" placeholder="ì´ë¦„/ì´ë‹ˆì…œ" style="width: 160px;">
        </label>
        <button id="resetBtn">í•„í„° ì´ˆê¸°í™”</button>
        <span id="syncStatus" class="muted">ë™ê¸°í™”: ëŒ€ê¸°</span>
        <span class="muted">í–‰ í´ë¦­ìœ¼ë¡œ ìƒíƒœë¥¼ ë³€ê²½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</span>
    </div>

    <table id="tcTable">
        <thead>
            <tr>
                <th style="width: 6%;">ID</th>
                <th style="width: 14%;">ì¹´í…Œê³ ë¦¬</th>
                <th style="width: 25%;">ê¸°ëŠ¥ëª…</th>
                <th style="width: 35%;">í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤ (ìƒì„¸)</th>
                <th style="width: 10%;">ê°œë°œ ìƒíƒœ</th>
                <th style="width: 10%;">TC ê²°ê³¼</th>
            </tr>
        </thead>
        <tbody id="tcBody"></tbody>
    </table>
    <div class="footer">
        ì´ <span id="totalCount" class="count">0</span>ê±´
        <span class="pill" id="doneCount">ê°œë°œ ì™„ë£Œ 0</span>
        <span class="pill" id="passCount">TC Pass 0</span>
        <span class="pill" id="failCount">TC Fail 0</span>
    </div>

    <script>
        // ============ ì›ê²© ì €ì¥ì†Œ (Google Apps Script Web App) ============
        // ë°°í¬í•œ Apps Script Web App URLë¡œ êµì²´í•˜ì„¸ìš”
        const GAS_WEBAPP_URL = "https://script.google.com/macros/s/AKfycbz0Y0va1VOIP1Zi8F3p7A0vbIwVzRWw92Gb9HRqxXND3Pusx1wm_WF6W7flRkla-fQI/exec";

        function setSyncStatus(text, color = "#868e96") {
            const el = document.getElementById("syncStatus");
            el.textContent = "ë™ê¸°í™”: " + text;
            el.style.color = color;
        }

        async function loadRemoteStatuses() {
            if (!GAS_WEBAPP_URL || GAS_WEBAPP_URL.startsWith("REPLACE_")) return null;
            try {
                setSyncStatus("ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘â€¦");
                const url = GAS_WEBAPP_URL + "?action=get&project=qa-dashboard";
                const res = await fetch(url, { method: "GET" });
                if (!res.ok) throw new Error("HTTP " + res.status);
                const data = await res.json();
                setSyncStatus("ë¶ˆëŸ¬ì˜¤ê¸° ì™„ë£Œ", "#2f9e44");
                return data && data.statuses ? data.statuses : data;
            } catch (e) {
                setSyncStatus("ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨", "#e03131");
                return null;
            }
        }

        // Apps Scriptì˜ doPostì—ì„œ application/x-www-form-urlencodedë¡œ ë°›ë„ë¡ êµ¬ì„±í•˜ì—¬
        // ì‚¬ì „ê²€ì‚¬(OPTIONS) ì—†ì´ CORS ì´ìŠˆë¥¼ ì™„í™”í•©ë‹ˆë‹¤.
        async function saveRemoteStatus(id, state, updatedBy) {
            if (!GAS_WEBAPP_URL || GAS_WEBAPP_URL.startsWith("REPLACE_")) return;
            try {
                setSyncStatus("ì €ì¥ ì¤‘â€¦");
                const payload = {
                    action: "upsert",
                    project: "qa-dashboard",
                    id,
                    dev: state.dev,
                    tc: state.tc,
                    updatedBy: updatedBy || ""
                };
                const body = "payload=" + encodeURIComponent(JSON.stringify(payload));
                const res = await fetch(GAS_WEBAPP_URL, {
                    method: "POST",
                    headers: { "Content-Type": "application/x-www-form-urlencoded" },
                    body
                });
                if (!res.ok) throw new Error("HTTP " + res.status);
                setSyncStatus("ì €ì¥ë¨", "#2f9e44");
            } catch (e) {
                setSyncStatus("ì €ì¥ ì‹¤íŒ¨", "#e03131");
                // ì›ê²© ì‹¤íŒ¨ ì‹œì—ë„ ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ëŠ” ìœ ì§€ë©ë‹ˆë‹¤.
            }
        }

        // ============ ì²´í¬ë¦¬ìŠ¤íŠ¸ ë°ì´í„° (QA ì²´í¬ë¦¬ìŠ¤íŠ¸ - Happy Path.md ê¸°ë°˜) ============
        const items = [
            // 1) LEBS API â€” Happy Path
            { c: "LEBS API â€” Happy Path", n: "Partner Account ìƒì„±", d: "íŒŒíŠ¸ë„ˆ ê³ ê°ì‚¬ë¥¼ ìƒì„±í•  ìˆ˜ ìˆë‹¤." },
            { c: "LEBS API â€” Happy Path", n: "íŒŒíŠ¸ë„ˆ íšŒì› ìƒì„±", d: "ì•„ì´ë””/ì´ë©”ì¼/ì´ë¦„ìœ¼ë¡œ ìƒì„±, ê¸°ë³¸ ë¹„ë°€ë²ˆí˜¸ ë¶€ì—¬, íŠ¹ì • Partner Accountì— í• ë‹¹í•œë‹¤." },
            { c: "LEBS API â€” Happy Path", n: "Partner Contract ìƒì„±", d: "ê³ ê°ì‚¬ì˜ ê³„ì•½ì„ ìƒì„±í•œë‹¤." },
            { c: "LEBS API â€” Happy Path", n: "Partner License ìƒì„±", d: "ê³ ê°ì‚¬ ê³„ì•½ì— ë”¸ë¦° ë¼ì´ì„ ìŠ¤ë¥¼ ìƒì„±í•œë‹¤." },
            { c: "LEBS API â€” Happy Path", n: "Partner Subscription ìƒì„±", d: "ë¼ì´ì„ ìŠ¤ì™€ ì—°ê²°ëœ êµ¬ë… ì •ë³´ë¥¼ ìƒì„±í•œë‹¤." },
            { c: "LEBS API â€” Happy Path", n: "API Key ìƒì„±/í• ë‹¹", d: "50ì ì•ŒíŒŒë‰´ë©”ë¦­ ìƒì„±, ì§€ì • Partner Accountì— í• ë‹¹, ë°ì´í„°ì…‹ ì§€ì •í•  ìˆ˜ ìˆë‹¤." },
            { c: "LEBS API â€” Happy Path", n: "ê´€ê³„ ì¼ê´€ì„±(ì„ íƒ)", d: "íšŒì› 1 : Account 1 : API Key N ê´€ê³„ê°€ ì¡°íšŒ ì‹œ ì¼ê´€ì„± ìœ ì§€" },

            // 2) ë‹¤ìŒ ë‹¨ê³„ë¡œ ë„˜ì–´ê°€ê¸° ì „ì— í•„ìˆ˜ í™•ì¸ â€” Happy Path
            { c: "í•„ìˆ˜ í™•ì¸ â€” Happy Path", n: "ê´€ë¦¬ì íšŒì› ì¡´ì¬", d: "íŒŒíŠ¸ë„ˆ ê³„ì •/ê´€ë¦¬ì íšŒì›ì´ ìƒì„±ë˜ì–´ ìˆë‹¤" },
            { c: "í•„ìˆ˜ í™•ì¸ â€” Happy Path", n: "API Key ë°œê¸‰", d: "ìµœì†Œ 1ê°œì˜ API Key(50ì ì˜ë¬¸/ìˆ«ì)ê°€ ë°œê¸‰ë˜ì–´ ìˆë‹¤" },
            { c: "í•„ìˆ˜ í™•ì¸ â€” Happy Path", n: "ë°ì´í„°ì…‹ ê¶Œí•œ", d: "API Keyì— 'ë²•ë ¹' ë°ì´í„°ì…‹ ê¶Œí•œì´ í• ë‹¹ë˜ì–´ ìˆë‹¤" },
            { c: "í•„ìˆ˜ í™•ì¸ â€” Happy Path", n: "ì¸ì¦/ì¸ê°€ ì •ì±…", d: "ì¸ì¦/ì¸ê°€ ê¸°ë³¸ ì •ì±…(Keycloak ê¸°ë³¸ ì •ì±…)ì´ ì ìš©ë˜ì–´ ìˆë‹¤" },

            // 3) íŒŒíŠ¸ë„ˆ í¬í„¸ UI â€” Happy Path
            { c: "íŒŒíŠ¸ë„ˆ í¬í„¸ UI â€” Happy Path", n: "ìµœì´ˆ ë¡œê·¸ì¸ í”Œë¡œìš°", d: "â€œìµœì´ˆ ë¡œê·¸ì¸ â†’ ë¹„ë°€ë²ˆí˜¸ ì¬ì„¤ì • â†’ (ì¬)ë¡œê·¸ì¸ â†’ ì‚¬ìš©ëŸ‰ ì²« í™”ë©´â€ ìˆœì„œë¡œ ì‘ë™" },
            { c: "íŒŒíŠ¸ë„ˆ í¬í„¸ UI â€” Happy Path", n: "ë¡œê·¸ì¸ ì„±ê³µ", d: "ë¡œê·¸ì¸ í™”ë©´ì„ í†µê³¼í•´ ì²« í™”ë©´ìœ¼ë¡œ ëœë”© (ì‚¬ìš©ëŸ‰)" },
            { c: "íŒŒíŠ¸ë„ˆ í¬í„¸ UI â€” Happy Path", n: "ë¹„ë°€ë²ˆí˜¸ ì¬ì„¤ì •", d: "ì´ë©”ì¼ ì…ë ¥â†’ì¬ì„¤ì • ë§í¬ ìˆ˜ì‹ â†’ë§í¬ í†µí•´ ìƒˆ ë¹„ë°€ë²ˆí˜¸ ì„¤ì • ì™„ë£Œ" },
            { c: "íŒŒíŠ¸ë„ˆ í¬í„¸ UI â€” Happy Path", n: "ì„¸ì…˜ ìœ ì§€", d: "ì •ìƒ ì‚¬ìš© ì¤‘ ì •ì±… ê¸°ì¤€ ì‹œê°„ ë‚´ ì„¸ì…˜ ìœ ì§€ ë™ì‘" },
            { c: "íŒŒíŠ¸ë„ˆ í¬í„¸ UI â€” Happy Path", n: "í”„ë¡œí•„ ê´€ë¦¬", d: "ì´ë¦„/ì´ë©”ì¼/ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ ì €ì¥ ì„±ê³µ(í˜„ì¬ ë¹„ë°€ë²ˆí˜¸ ì¸ì¦ í¬í•¨)" },
            { c: "íŒŒíŠ¸ë„ˆ í¬í„¸ UI â€” Happy Path", n: "API Key ì¡°íšŒ", d: "Key ì „ë¬¸(50ì ì•ŒíŒŒë‰´ë©”ë¦­)Â·ìƒì„±ì¼Â·ì´ë¦„Â·ì„¤ëª…Â·ì ‘ê·¼ ë°ì´í„°ì…‹ í‘œì‹œ, Key ì „ë¬¸ ì „ì²´ í™•ì¸ ê°€ëŠ¥" },
            { c: "íŒŒíŠ¸ë„ˆ í¬í„¸ UI â€” Happy Path", n: "ì‚¬ìš©ëŸ‰ ì¡°íšŒ", d: "ì¼ìë³„ ì§‘ê³„ í‘œ ì •ìƒ í‘œì‹œ" },
            { c: "íŒŒíŠ¸ë„ˆ í¬í„¸ UI â€” Happy Path", n: "ë¡œê·¸ì•„ì›ƒ", d: "ë¡œê·¸ì•„ì›ƒ í›„ ë¡œê·¸ì¸ í™”ë©´ ì´ë™, ì¸ì¦ ì„¸ì…˜ ì¢…ë£Œ" },
            { c: "íŒŒíŠ¸ë„ˆ í¬í„¸ UI â€” Happy Path", n: "API ì—°ë™ ë¬¸ì„œ", d: "ë¬¸ì„œ ì ‘ê·¼/ë‹¤ìš´ë¡œë“œ ê°€ëŠ¥(ì„ íƒ)" },

            // 3) íŒŒíŠ¸ë„ˆ API â€” Happy Path
            { c: "íŒŒíŠ¸ë„ˆ API â€” Happy Path", n: "AI ì§ˆì˜ ìš”ì²­/ì‘ë‹µ", d: "ìœ íš¨ API Key(+í—ˆìš©ëœ IP/í† í°) ìš”ì²­ ì‹œ 200, ì‘ë‹µ ë³¸ë¬¸ì— AI ë‹µë³€ í¬í•¨" },
            { c: "íŒŒíŠ¸ë„ˆ API â€” Happy Path", n: "ë°ì´í„°ì…‹ ê²€ì¦", d: "'ë²•ë ¹'ë§Œ ì‚¬ìš© ê°€ëŠ¥í•œ API Keyë¡œ ì§ˆì˜ ì‹œ, ì‘ë‹µì— ë²•ë ¹ë§Œ í¬í•¨" },
            { c: "íŒŒíŠ¸ë„ˆ API â€” Happy Path", n: "Metering ê¸°ë¡", d: "ì§ˆì˜ 1ê±´ë‹¹ ì‚¬ìš©ëŸ‰ 1ê±´ìœ¼ë¡œ ì§‘ê³„(íŒŒíŠ¸ë„ˆ í¬í„¸ ì¼ì¼ ì§‘ê³„ ë°˜ì˜)" },
            { c: "íŒŒíŠ¸ë„ˆ API â€” Happy Path", n: "ì°¸ì¡° ë¬¸ì„œ ì œê³µ", d: "ì—˜ë°•ìŠ¤ PDP URL ìµœëŒ€ 10ê±´, ë¬¸ì„œ hashed key ìµœëŒ€ 10ê±´ í¬í•¨(ì •ì±… í¬í•¨ ì‹œ)" },
            { c: "íŒŒíŠ¸ë„ˆ API â€” Happy Path", n: "PDP URL ì‘ë‹µ", d: "ì°¸ì¡° ë¬¸ì„œ PDP URL ì ‘ê·¼ 200 ì‘ë‹µ(ê¶Œí•œ/ë¦¬ë‹¤ì´ë ‰íŠ¸ ë¬¸ì œ ì—†ìŒ)" },
            { c: "íŒŒíŠ¸ë„ˆ API â€” Happy Path", n: "ë¬¸ì„œ ì¡°íšŒ(ìš°ì„ ìˆœìœ„ ë‚®ìŒ)", d: "í•´ì‹œ í‚¤ë¡œ ì¡°íšŒ ì‹œ ìœ íš¨ ì‹œê°„ ë‚´(ì˜ˆ: 10ë¶„) 200, ë³¸ë¬¸ ì œê³µ" },

            // 4) ë¹„ê¸°ëŠ¥/ë³´ì•ˆ â€” Happy Path
            { c: "ë¹„ê¸°ëŠ¥/ë³´ì•ˆ â€” Happy Path", n: "ì¸ì¦/ì¸ê°€ íë¦„", d: "ë³´í˜¸ ë¦¬ì†ŒìŠ¤ ì ‘ê·¼ ì‹œ ë¡œê·¸ì¸ í•„ìš”, ê¶Œí•œ ë‚´ ë©”ë‰´ë§Œ ì ‘ê·¼" },
            { c: "ë¹„ê¸°ëŠ¥/ë³´ì•ˆ â€” Happy Path", n: "ë°ì´í„°ì…‹ ì ‘ê·¼ í†µì œ", d: "ì§€ì •ëœ ë°ì´í„°ì…‹ë§Œ ì‘ë‹µ/ì°¸ì¡° ë¬¸ì„œë¡œ ì œê³µ" },
            { c: "ë¹„ê¸°ëŠ¥/ë³´ì•ˆ â€” Happy Path", n: "ê°ì‚¬/ë¡œê·¸", d: "ë¡œê·¸ì¸, Key ë°œê¸‰, API í˜¸ì¶œ ë“± ì£¼ìš” ì´ë²¤íŠ¸ ë¡œê·¸ ë‚¨ê¹€" },

            // Error â€” ê³µí†µ/í™˜ê²½
            { c: "ê³µí†µ/í™˜ê²½ â€” Error", n: "í•„ìˆ˜ íŒŒë¼ë¯¸í„° ëˆ„ë½", d: "400" },
            { c: "ê³µí†µ/í™˜ê²½ â€” Error", n: "í¬ë§· ì˜¤ë¥˜", d: "ì´ë©”ì¼/ê¸¸ì´/ì•ŒíŒŒë‰´ë©”ë¦­ ë¶ˆì¼ì¹˜ ë“± â†’ 422" },
            { c: "ê³µí†µ/í™˜ê²½ â€” Error", n: "ê¶Œí•œ ì—†ìŒ", d: "í† í°/ì—­í• /ë°ì´í„°ì…‹ ë¯¸ì¼ì¹˜ â†’ 403" },
            { c: "ê³µí†µ/í™˜ê²½ â€” Error", n: "ì¸ì¦ ì‹¤íŒ¨", d: "ë§Œë£Œ/ìœ íš¨í•˜ì§€ ì•Šì€ í† í°/Key â†’ 401" },
            { c: "ê³µí†µ/í™˜ê²½ â€” Error", n: "ë¦¬ì†ŒìŠ¤ ì—†ìŒ", d: "ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ID/Key â†’ 404" },
            { c: "ê³µí†µ/í™˜ê²½ â€” Error", n: "ì¤‘ë³µ ìƒì„±", d: "ì´ë©”ì¼/í‚¤/ì‹ë³„ì ì¶©ëŒ â†’ 409" },
            { c: "ê³µí†µ/í™˜ê²½ â€” Error", n: "ì¿¼í„° ì´ˆê³¼", d: "429" },
            { c: "ê³µí†µ/í™˜ê²½ â€” Error", n: "ì„œë²„ ì˜¤ë¥˜/íƒ€ì„ì•„ì›ƒ", d: "5xx/504" },

            // Error â€” LEBS API
            { c: "LEBS API â€” Error", n: "Account ìƒì„±", d: "í•„ìˆ˜ê°’ ëˆ„ë½/í¬ë§· ì˜¤ë¥˜ â†’ 400/422" },
            { c: "LEBS API â€” Error", n: "íšŒì› ìƒì„±", d: "ì´ë©”ì¼ í˜•ì‹ ì˜¤ë¥˜/ì¤‘ë³µ ì´ë©”ì¼ â†’ 422/409" },
            { c: "LEBS API â€” Error", n: "íšŒì› í• ë‹¹", d: "ì¡´ì¬í•˜ì§€ ì•ŠëŠ” Partner Account í• ë‹¹ â†’ 404" },
            { c: "LEBS API â€” Error", n: "ê³„ì•½/ë¼ì´ì„ ìŠ¤/êµ¬ë…", d: "ì„ í–‰ ì—”í‹°í‹° ë¯¸ì¡´ì¬(ìˆœì„œ ìœ„ë°˜) â†’ 409/404" },
            { c: "LEBS API â€” Error", n: "Key ìƒì„±(í˜•ì‹)", d: "50ì ì•ŒíŒŒë‰´ë©”ë¦­ ë¶ˆì¼ì¹˜/ê¸¸ì´ ì´ˆê³¼ â†’ 422" },
            { c: "LEBS API â€” Error", n: "Key ìƒì„±(ë°ì´í„°ì…‹)", d: "ë¯¸ì§€ì› ë°ì´í„°ì…‹ ì§€ì • â†’ 422" },
            { c: "LEBS API â€” Error", n: "Key í• ë‹¹", d: "ë¹„í™œì„±/íê¸° Accountì— í• ë‹¹ ì‹œë„ â†’ 409/403" },
            { c: "LEBS API â€” Error", n: "ë©±ë“±ì„±", d: "ë©±ë“±ì„± ë¯¸ë³´ì¥ìœ¼ë¡œ ì¤‘ë³µ ìƒì„± â†’ 409" },
            { c: "LEBS API â€” Error", n: "ì¼ê´€ì„± ì§€ì—°", d: "ìƒì„± ì„±ê³µ í›„ ì¦‰ì‹œ ì¡°íšŒ ë¶ˆì¼ì¹˜ â†’ ì¬ì‹œë„/ê´€ì°°" },

            // Error â€” í•„ìˆ˜ í™•ì¸
            { c: "í•„ìˆ˜ í™•ì¸ â€” Error", n: "ê´€ë¦¬ì íšŒì› ì—†ìŒ", d: "í¬í„¸ ì ‘ê·¼ â†’ 401" },
            { c: "í•„ìˆ˜ í™•ì¸ â€” Error", n: "Key ìƒíƒœ ì´ìƒ", d: "ë¯¸ë°œê¸‰/ë§Œë£Œ/íê¸°/ë¹„í™œì„± â†’ 401/403" },
            { c: "í•„ìˆ˜ í™•ì¸ â€” Error", n: "ë°ì´í„°ì…‹ ê¶Œí•œ ì—†ìŒ", d: "â€˜ë²•ë ¹â€™ ê¶Œí•œ ë¯¸ë¶€ì—¬ Keyë¡œ ë²•ë ¹ ë°ì´í„° ì ‘ê·¼ â†’ 403" },

            // Error â€” í¬í„¸ UI
            { c: "íŒŒíŠ¸ë„ˆ í¬í„¸ UI â€” Error", n: "ë¡œê·¸ì¸ ì‹¤íŒ¨", d: "ì˜ëª»ëœ ì´ë©”ì¼/ë¹„ë°€ë²ˆí˜¸ â†’ ì˜¤ë¥˜ ë©”ì‹œì§€" },
            { c: "íŒŒíŠ¸ë„ˆ í¬í„¸ UI â€” Error", n: "ê³„ì • ì ê¹€/ë¹„í™œì„±", d: "ë¡œê·¸ì¸ ì°¨ë‹¨, ì•ˆë‚´ ë©”ì‹œì§€" },
            { c: "íŒŒíŠ¸ë„ˆ í¬í„¸ UI â€” Error", n: "ìµœì´ˆ ë¹„ë²ˆ ì¬ì„¤ì •", d: "ë³µì¡ë„ ë¯¸ì¶©ì¡±/ì´ì „ ë¹„ë°€ë²ˆí˜¸ ì¬ì‚¬ìš© â†’ 422" },
            { c: "íŒŒíŠ¸ë„ˆ í¬í„¸ UI â€” Error", n: "ì¬ì„¤ì • ë§í¬ ë§Œë£Œ", d: "400/410" },
            { c: "íŒŒíŠ¸ë„ˆ í¬í„¸ UI â€” Error", n: "ì¬ì„¤ì • ë§í¬ ìœ„ì¡°", d: "400/410" },
            { c: "íŒŒíŠ¸ë„ˆ í¬í„¸ UI â€” Error", n: "í”„ë¡œí•„ ë³€ê²½ ì¸ì¦", d: "í˜„ì¬ ë¹„ë°€ë²ˆí˜¸ ë¶ˆì¼ì¹˜ â†’ 401" },
            { c: "íŒŒíŠ¸ë„ˆ í¬í„¸ UI â€” Error", n: "í”„ë¡œí•„ ë³€ê²½ í˜•ì‹", d: "ì´ë©”ì¼ í˜•ì‹ ì˜¤ë¥˜/ì¤‘ë³µ ì´ë©”ì¼ â†’ 422/409" },
            { c: "íŒŒíŠ¸ë„ˆ í¬í„¸ UI â€” Error", n: "ì„¸ì…˜ íƒ€ì„ì•„ì›ƒ", d: "ì´í›„ ì•¡ì…˜ ì‹œ ì¬ë¡œê·¸ì¸ ìš”êµ¬" },
            { c: "íŒŒíŠ¸ë„ˆ í¬í„¸ UI â€” Error", n: "API Key ëª©ë¡ ê¶Œí•œ", d: "ê¶Œí•œ ë°– Key ë…¸ì¶œ/ë¹„ë…¸ì¶œ ê²€ì¦ â†’ ì ‘ê·¼ì œì–´ í™•ì¸" },
            { c: "íŒŒíŠ¸ë„ˆ í¬í„¸ UI â€” Error", n: "ì‚¬ìš©ëŸ‰ í‘œ ë¡œë”© ì‹¤íŒ¨", d: "ì—ëŸ¬ ìƒíƒœ UI/ì¬ì‹œë„" },
            { c: "íŒŒíŠ¸ë„ˆ í¬í„¸ UI â€” Error", n: "ë¬¸ì„œ/ê°€ì´ë“œ ë‹¤ìš´ë¡œë“œ ì‹¤íŒ¨", d: "403/404" },

            // Error â€” íŒŒíŠ¸ë„ˆ API
            { c: "íŒŒíŠ¸ë„ˆ API â€” Error", n: "ì¸ì¦ ì‹¤íŒ¨", d: "API Key ë¶ˆì¼ì¹˜ â†’ 401, code AUTH_INVALID_KEY, \"Invalid API key\"" },
            { c: "íŒŒíŠ¸ë„ˆ API â€” Error", n: "ì¸ê°€ ì‹¤íŒ¨", d: "í—ˆìš© IP ëŒ€ì—­ ì•„ë‹˜ â†’ 403, code IP_NOT_ALLOWED" },
            { c: "íŒŒíŠ¸ë„ˆ API â€” Error", n: "ë³¸ë¬¸ ì˜¤ë¥˜/ëˆ„ë½", d: "400/422, code INVALID_REQUEST_BODY, details í¬í•¨" },
            { c: "íŒŒíŠ¸ë„ˆ API â€” Error", n: "ì…ë ¥ ì´ˆê³¼", d: "í”„ë¡¬í”„íŠ¸ ê¸¸ì´ ì œí•œ ì´ˆê³¼ â†’ 413, code INPUT_TOO_LONG" },
            { c: "íŒŒíŠ¸ë„ˆ API â€” Error", n: "ë°ì´í„°ì…‹ ë¶ˆì¼ì¹˜", d: "â€˜ë²•ë ¹â€™ ë¯¸í—ˆìš© Keyë¡œ ì§ˆì˜ â†’ 403" },
            { c: "íŒŒíŠ¸ë„ˆ API â€” Error", n: "ì¿¼í„° ì´ˆê³¼", d: "429, code RATE_LIMIT_EXCEEDED (resetAt í¬í•¨)" },
            { c: "íŒŒíŠ¸ë„ˆ API â€” Error", n: "ì°¸ì¡° ë¬¸ì„œ 0ê±´", d: "200, ë¹ˆ ëª©ë¡ í—ˆìš©(ì •ì±… í™•ì • ì‹œ 204 ëŒ€ì•ˆ)" },
            { c: "íŒŒíŠ¸ë„ˆ API â€” Error", n: "PDP URL ì ‘ê·¼ ì‹¤íŒ¨", d: "403/ë¦¬ë‹¤ì´ë ‰íŠ¸ ë£¨í”„ â†’ ë§í¬ ìœ íš¨ì„±/ê¶Œí•œ ê²€ì¦" },
            { c: "íŒŒíŠ¸ë„ˆ API â€” Error", n: "ë¬¸ì„œ ì¡°íšŒ í‚¤ ë§Œë£Œ/ìœ„ì¡°", d: "401/403" },
            { c: "íŒŒíŠ¸ë„ˆ API â€” Error", n: "ë¬¸ì„œ ì¡°íšŒ ìœ íš¨ ì‹œê°„ ì´ˆê³¼", d: ">10ë¶„ â†’ 410/403" },
            { c: "íŒŒíŠ¸ë„ˆ API â€” Error", n: "ì„œë²„ íƒ€ì„ì•„ì›ƒ/AI ì§€ì—°", d: "504/ì¬ì‹œë„ ì§€ì¹¨" },

            // Error â€” ë°ì´í„° ì¼ê´€ì„±/ì§‘ê³„
            { c: "ë°ì´í„° ì¼ê´€ì„±/ì§‘ê³„ â€” Error", n: "ì„±ê³µ ì§‘ê³„", d: "ì„±ê³µ ì‘ë‹µì´ë©´ ì‚¬ìš©ëŸ‰ì´ ì§‘ê³„ë˜ì–´ì•¼ í•œë‹¤" },
            { c: "ë°ì´í„° ì¼ê´€ì„±/ì§‘ê³„ â€” Error", n: "ì‹¤íŒ¨ ë¯¸ì§‘ê³„", d: "ì‹¤íŒ¨ ì‘ë‹µì´ë©´ ì‚¬ìš©ëŸ‰ì´ ì§‘ê³„ë˜ì§€ ì•Šì•„ì•¼ í•œë‹¤" },
            { c: "ë°ì´í„° ì¼ê´€ì„±/ì§‘ê³„ â€” Error", n: "ì‹œê°„ëŒ€ ê¸°ì¤€", d: "ëª¨ë“  ì§‘ê³„ ì‹œê°„ì€ KST ê¸°ì¤€ì´ë©° ë‚ ì§œ ê²½ê³„(ìì •) ê²€ì¦" },

            // Error â€” ë³´ì•ˆ/ì»´í”Œë¼ì´ì–¸ìŠ¤
            { c: "ë³´ì•ˆ/ì»´í”Œë¼ì´ì–¸ìŠ¤ â€” Error", n: "ë¯¼ê°ì •ë³´ ë¡œê·¸ ë…¸ì¶œ", d: "ë¹„ë°€ë²ˆí˜¸/Key ë§ˆìŠ¤í‚¹ í™•ì¸" },
            { c: "ë³´ì•ˆ/ì»´í”Œë¼ì´ì–¸ìŠ¤ â€” Error", n: "CORS/CSRF", d: "ì„¤ì • ì˜¤ë¥˜ â†’ ì •ì±… í™•ì¸" },
            { c: "ë³´ì•ˆ/ì»´í”Œë¼ì´ì–¸ìŠ¤ â€” Error", n: "ë¸Œë£¨íŠ¸í¬ìŠ¤ ë°©ì–´", d: "ê³„ì • ë½/ì§€ì—°/ìº¡ì°¨ ì •ì±… í™•ì¸" },
            { c: "ë³´ì•ˆ/ì»´í”Œë¼ì´ì–¸ìŠ¤ â€” Error", n: "URL íŒŒë¼ë¯¸í„° ì¡°ì‘", d: "íƒ€ Account ì ‘ê·¼ â†’ ìˆ˜ì§/ìˆ˜í‰ ê¶Œí•œ ì²´í¬" },
            { c: "ë³´ì•ˆ/ì»´í”Œë¼ì´ì–¸ìŠ¤ â€” Error", n: "ë ˆì´íŠ¸ë¦¬ë°‹ ìš°íšŒ", d: "ë‹¤ì¤‘ IP/Key ìˆœí™˜ â†’ ê¸€ë¡œë²Œ/ì—”í‹°í‹°ë³„ ì •ì±… í™•ì¸" }
        ];

        // ============ ìƒíƒœ ë³´ì¡´ (ë¡œì»¬) ============
        // ì›ê²© ì €ì¥ì†Œ ì—°ë™ ì „/ì‹¤íŒ¨ ì‹œì—ë„ ë™ì‘í•˜ë„ë¡ ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.
        const STORAGE_KEY = "qa-dashboard-status";

        function getSavedStatuses() {
            try {
                return JSON.parse(localStorage.getItem(STORAGE_KEY) || "{}");
            } catch { return {}; }
        }
        function saveStatuses(status) {
            localStorage.setItem(STORAGE_KEY, JSON.stringify(status));
        }

        function render() {
            const tbody = document.getElementById("tcBody");
            const categoryFilter = document.getElementById("categoryFilter").value;
            const searchQuery = document.getElementById("searchInput").value.trim().toLowerCase();
            const saved = getSavedStatuses();

            tbody.innerHTML = "";
            let idCounter = 1;
            let done = 0, pass = 0, fail = 0, total = 0;

            items.forEach((it, idx) => {
                const id = idx + 1;
                const matchesCategory = categoryFilter === "ALL" || it.c === categoryFilter;
                const matchesSearch = !searchQuery || (it.n + " " + it.d + " " + it.c).toLowerCase().includes(searchQuery);
                if (!matchesCategory || !matchesSearch) return;

                total++;
                const key = "i" + id;
                const devState = saved[key]?.dev || "todo"; // todo | done
                const tcState = saved[key]?.tc || "pending"; // pending | pass | fail

                const tr = document.createElement("tr");
                tr.innerHTML = `
                    <td>${idCounter}</td>
                    <td class="category">${it.c}</td>
                    <td>${it.n}</td>
                    <td><span class="desc">${it.d || ""}</span></td>
                    <td class="right">
                        <span class="badge ${devState === "done" ? "dev-done" : "dev-todo"}" data-id="${key}" data-type="dev">${devState === "done" ? "ê°œë°œ ì™„ë£Œ âœ…" : "ê°œë°œ ëŒ€ê¸°"}</span>
                    </td>
                    <td class="right">
                        <span class="badge ${tcState === "pass" ? "tc-pass" : (tcState === "fail" ? "tc-fail" : "tc-pending")}" data-id="${key}" data-type="tc">${tcState === "pass" ? "Pass ğŸ”µ" : (tcState === "fail" ? "Fail ğŸ”´" : "ë¯¸í…ŒìŠ¤íŠ¸")}</span>
                    </td>
                `;
                tbody.appendChild(tr);

                if (devState === "done") done++;
                if (tcState === "pass") pass++;
                if (tcState === "fail") fail++;
                idCounter++;
            });

            document.getElementById("totalCount").innerText = total;
            document.getElementById("doneCount").innerText = "ê°œë°œ ì™„ë£Œ " + done;
            document.getElementById("passCount").innerText = "TC Pass " + pass;
            document.getElementById("failCount").innerText = "TC Fail " + fail;
        }

        function initFilters() {
            const select = document.getElementById("categoryFilter");
            const categories = Array.from(new Set(items.map(i => i.c)));
            categories.forEach(c => {
                const opt = document.createElement("option");
                opt.value = c;
                opt.textContent = c;
                select.appendChild(opt);
            });
            select.addEventListener("change", render);
            document.getElementById("searchInput").addEventListener("input", render);
            document.getElementById("resetBtn").addEventListener("click", () => {
                select.value = "ALL";
                document.getElementById("searchInput").value = "";
                render();
            });
            // ì‘ì„±ì ì…ë ¥ê°’ ì €ì¥/ë³µì›
            const updatedByInput = document.getElementById("updatedByInput");
            updatedByInput.value = localStorage.getItem("qa-dashboard-updatedBy") || "";
            updatedByInput.addEventListener("input", () => {
                localStorage.setItem("qa-dashboard-updatedBy", updatedByInput.value.trim());
            });
        }

        function initInteractions() {
            document.getElementById("tcBody").addEventListener("click", (e) => {
                const target = e.target;
                if (!target.classList.contains("badge")) return;
                const id = target.getAttribute("data-id");
                const type = target.getAttribute("data-type");
                const saved = getSavedStatuses();
                const state = saved[id] || {};

                if (type === "dev") {
                    // toggle dev state
                    if (target.classList.contains("dev-todo")) {
                        target.classList.remove("dev-todo");
                        target.classList.add("dev-done");
                        target.innerText = "ê°œë°œ ì™„ë£Œ âœ…";
                        state.dev = "done";
                    } else {
                        target.classList.remove("dev-done");
                        target.classList.add("dev-todo");
                        target.innerText = "ê°œë°œ ëŒ€ê¸°";
                        state.dev = "todo";
                    }
                } else if (type === "tc") {
                    // cycle tc state: pending -> pass -> fail -> pending
                    if (target.classList.contains("tc-pending")) {
                        target.classList.remove("tc-pending");
                        target.classList.add("tc-pass");
                        target.innerText = "Pass ğŸ”µ";
                        state.tc = "pass";
                    } else if (target.classList.contains("tc-pass")) {
                        target.classList.remove("tc-pass");
                        target.classList.add("tc-fail");
                        target.innerText = "Fail ğŸ”´";
                        state.tc = "fail";
                    } else {
                        target.classList.remove("tc-fail");
                        target.classList.add("tc-pending");
                        target.innerText = "ë¯¸í…ŒìŠ¤íŠ¸";
                        state.tc = "pending";
                    }
                }
                const savedAll = getSavedStatuses();
                savedAll[id] = state;
                saveStatuses(savedAll);
                // ì›ê²© ì €ì¥ ì‹œë„
                const updatedBy = (document.getElementById("updatedByInput").value || "").trim();
                saveRemoteStatus(id, state, updatedBy);
                // ìš”ì•½ ìˆ˜ì¹˜ ì—…ë°ì´íŠ¸
                render();
            });
        }

        // ì´ˆê¸°í™” (ì›ê²© ìƒíƒœ ë¶ˆëŸ¬ì˜¤ê¸° í›„ ë Œë”)
        async function init() {
            initFilters();
            const remote = await loadRemoteStatuses();
            if (remote && typeof remote === "object") {
                const local = getSavedStatuses();
                // ì›ê²© ê°’ì„ ìš°ì„  ì ìš©(ë¡œì»¬ê³¼ ë³‘í•©)
                const merged = { ...local, ...remote };
                saveStatuses(merged);
            }
            render();
            initInteractions();
        }
        init();
    </script>
</body>
</html>

